{% extends "daily_sale/daily_sale_base.html" %}
{% block title %}Transactions Report{% endblock %}

{% block content %}
<h3>Transactions</h3>

<form class="row g-2 mb-3">
  <div class="col-auto"><input type="date" name="start_date" value="{{ filters.start_date }}" class="form-control">
  </div>
  <div class="col-auto"><input type="date" name="end_date" value="{{ filters.end_date }}" class="form-control"></div>
  <div class="col-auto">
    <select name="status" class="form-select">
      <option value="">Any status</option>
      <option value="pending" {% if filters.status == 'pending' %}selected{% endif %}>Pending</option>
      <option value="paid" {% if filters.status == 'paid' %}selected{% endif %}>Paid</option>
    </select>
  </div>
  <div class="col-auto"><button class="btn btn-primary">Filter</button></div>
</form>

<div class="table-responsive">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Invoice</th>
        <th>Date</th>
        <th>Type</th>
        <th>Customer</th>
        <th>Item</th>
        <th>Total</th>
        <th>Balance</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for t in transactions %}
      <tr>
        <td>{{ t.invoice_number }}</td>
        <td>{{ t.date }}</td>
        <td>{{ t.get_transaction_type_display }}</td>
        <td>
          {% if t.customer %}
          {{ t.customer.user.get_full_name|default:t.customer }}
          {% else %}
          -
          {% endif %}
        </td>
        <td>
          {% if t.item %}
          {{ t.item.product_name }}
          {% else %}
          -
          {% endif %}
        </td>
        <td>{{ t.total_amount }}</td>
        <td>{{ t.balance }}</td>
        <td>{{ t.status }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="8">No transactions found.</td>
      </tr>
      {% endfor %}

    </tbody>
  </table>
</div>

<h5 class="mt-4">Summary</h5>
<pre>{{ summary }}</pre>
{% endblock %}