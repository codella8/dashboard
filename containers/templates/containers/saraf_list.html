{% extends 'containers/container_base.html' %}
{% block title %}لیست صراف‌ها{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>صراف‌ها</h3>
  <a href="{% url 'containers:saraf_add' %}" class="btn btn-primary">صراف جدید</a>
</div>

{% include 'containers/includes/_filters.html' %}

<table class="table table-striped table-hover table-sm">
  <thead>
    <tr>
      <th>نام</th>
      <th>کل دریافت</th>
      <th>کل پرداخت</th>
      <th>کل بدهی</th>
      <th>مانده</th>
      <th class="text-right">عملیات</th>
    </tr>
  </thead>
  <tbody>
  {% for s in sarafs %}
    <tr>
      <td>{{ s.user.get_full_name|default:s.user }}</td>
      <td>{{ s.total_received|default:0|floatformat:2 }}</td>
      <td>{{ s.total_paid|default:0|floatformat:2 }}</td>
      <td>{{ s.total_debit|default:0|floatformat:2 }}</td>
      <td>{{ s.balance|default:0|floatformat:2 }}</td>
      <td class="text-right">
        <a class="btn btn-sm btn-outline-info" href="{% url 'containers:saraf_detail' s.id %}">نمایش</a>
        <a class="btn btn-sm btn-outline-secondary" href="{% url 'containers:saraf_transactions' s.id %}">تراکنش‌ها</a>
      </td>
    </tr>
  {% empty %}
    <tr><td colspan="6" class="text-center">هیچ صرافیی یافت نشد.</td></tr>
  {% endfor %}
  </tbody>
</table>

{% include 'containers/_pagination.html' %}
{% endblock %}
